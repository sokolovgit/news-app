@import 'tailwindcss';

@theme {
  /* Core Colors */
  --color-bg: var(--color-bg-value);
  --color-surface: var(--color-surface-value);
  --color-accent: var(--color-accent-value);
  --color-text: var(--color-text-value);

  /* Brand Colors */
  --color-primary: var(--color-primary-value);
  --color-secondary: var(--color-secondary-value);
  --color-tertiary: var(--color-tertiary-value);
  --color-bg-tint: var(--color-bg-tint-value);

  /* UI Element Colors */
  --color-border: var(--color-border-value);
  --color-muted: var(--color-muted-value);

  /* Status Colors */
  --color-success: var(--color-success-value);
  --color-warning: var(--color-warning-value);
  --color-error: var(--color-error-value);
  --color-info: var(--color-info-value);
}

@layer base {
  :root {
    /* Core Colors - Light Theme */
    --color-bg-value: #fafafa;
    --color-surface-value: #ffffff;
    --color-accent-value: #9b5de0;
    --color-text-value: #1a1a1a;

    /* Brand Colors - Light Theme */
    --color-primary-value: #E4D6FF; /* Light lavender for primary buttons */
    --color-secondary-value: #d78fee;
    --color-tertiary-value: #fdcffa;
    --color-bg-tint-value: #f8f5ff;

    /* UI Element Colors - Light Theme */
    --color-border-value: #e9e3f5;
    --color-muted-value: #6b6b7b;

    /* Status Colors - Light Theme */
    --color-success-value: #2d6a4f;
    --color-warning-value: #f59e0b;
    --color-error-value: #dc2626;
    --color-info-value: #9b5de0;

    /* Shadcn-compatible variables for components - Light Theme */
    --background: 0 0% 98%;
    --foreground: 0 0% 10%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 10%;
    --primary: 263 100% 92%; /* #E4D6FF - light lavender background */
    --primary-foreground: 263 78% 45%; /* #4A2FC7 - dark purple text */
    --primary-hover: 263 100% 88%; /* #D3C2FF - hover state */
    --primary-active: 263 100% 84%; /* #C1AEFF - active state */
    --secondary: 293 78% 74%; /* #d78fee */
    --secondary-foreground: 0 0% 10%;
    --muted: 270 20% 98%;
    --muted-foreground: 0 0% 42%;
    --accent: 263 100% 92%; /* Match primary for consistency */
    --accent-foreground: 263 78% 45%; /* Match primary-foreground */
    --destructive: 0 72% 51%; /* #dc2626 */
    --destructive-foreground: 0 0% 100%;
    --success: 150 60% 30%; /* #2d6a4f */
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%; /* #f59e0b */
    --warning-foreground: 0 0% 10%;
    --info: 263 100% 92%; /* Match primary */
    --info-foreground: 0 0% 100%;
    --border: 270 30% 92%;
    --input: 270 30% 90%;
    --ring: 263 78% 45%; /* Use dark purple for focus rings */
    --radius: 0.5rem;
    --overlay: 0 0% 0% / 0.8;
  }

  .dark {
    /* Core Colors - Dark Theme */
    --color-bg-value: #1a1a1a;
    --color-surface-value: #2a2a35;
    --color-accent-value: #c49aff;
    --color-text-value: #f5f5f5;

    /* Brand Colors - Dark Theme */
    --color-primary-value: #c49aff;
    --color-secondary-value: #d78fee;
    --color-tertiary-value: #fdcffa;
    --color-bg-tint-value: #3a2f4a;

    /* UI Element Colors - Dark Theme */
    --color-border-value: #3a3a4a;
    --color-muted-value: #b5b5c3;

    /* Status Colors - Dark Theme */
    --color-success-value: #52b788;
    --color-warning-value: #fbbf24;
    --color-error-value: #f87171;
    --color-info-value: #d78fee;

    /* Shadcn-compatible variables for components - Dark Theme */
    --background: 0 0% 10%;
    --foreground: 0 0% 96%;
    --card: 252 17% 16%; /* #2a2a35 */
    --card-foreground: 0 0% 96%;
    --popover: 252 17% 16%;
    --popover-foreground: 0 0% 96%;
    --primary: 263 100% 81%; /* #c49aff */
    --primary-foreground: 0 0% 10%;
    --primary-hover: 263 100% 75%; /* Darker purple for hover */
    --primary-active: 263 100% 70%; /* Even darker for active */
    --secondary: 293 78% 74%; /* #d78fee */
    --secondary-foreground: 0 0% 10%;
    --muted: 252 17% 20%;
    --muted-foreground: 0 0% 71%;
    --accent: 263 100% 81%;
    --accent-foreground: 0 0% 10%;
    --destructive: 0 68% 70%; /* #f87171 */
    --destructive-foreground: 0 0% 10%;
    --success: 150 53% 53%; /* #52b788 */
    --success-foreground: 0 0% 10%;
    --warning: 48 96% 57%; /* #fbbf24 */
    --warning-foreground: 0 0% 10%;
    --info: 293 78% 74%; /* #d78fee */
    --info-foreground: 0 0% 10%;
    --border: 252 17% 23%;
    --input: 252 17% 23%;
    --ring: 263 100% 81%;
    --overlay: 0 0% 0% / 0.8;
  }
}

/* Base Styles */
* {
  border-color: var(--color-border-value);
}

body {
  background-color: var(--color-bg-value);
  color: var(--color-text-value);
  font-feature-settings:
    'rlig' 1,
    'calt' 1;
}

/* Primary Button Icon Styling - ensure icons use correct stroke/text color */
button.bg-primary svg,
[class*='bg-primary'] svg,
.bg-primary svg {
  stroke: hsl(var(--primary-foreground)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

/* Ensure all button icons have proper contrast */
button[class*='bg-primary'] svg,
button[class*='text-primary-foreground'] svg {
  stroke: hsl(var(--primary-foreground)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

/* Typography defaults */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 600;
  color: var(--color-text-value);
}

h1 {
  font-size: 2.25rem;
  line-height: 2.5rem;
}

h2 {
  font-size: 1.875rem;
  line-height: 2.25rem;
}

h3 {
  font-size: 1.5rem;
  line-height: 2rem;
}

h4 {
  font-size: 1.25rem;
  line-height: 1.75rem;
}

h5 {
  font-size: 1.125rem;
  line-height: 1.75rem;
}

h6 {
  font-size: 1rem;
  line-height: 1.5rem;
}

/* Links */
a:not([class*='bg-']):not([class*='btn']) {
  color: var(--color-accent-value);
  text-decoration: none;
}

a:not([class*='bg-']):not([class*='btn']):hover {
  text-decoration: underline;
}

/* Autofill Override - prevents browser's default autofill background */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 1000px var(--color-surface-value) inset !important;
  box-shadow: 0 0 0 1000px var(--color-surface-value) inset !important;
  -webkit-text-fill-color: var(--color-text-value) !important;
  transition: background-color 5000s ease-in-out 0s;
}

input:-webkit-autofill::first-line {
  font-family: inherit;
  font-size: inherit;
}

@layer utilities {
  /* Custom scrollbar styles */
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background-color: var(--color-surface-value);
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: color-mix(in srgb, var(--color-text-value) 30%, transparent);
    border-radius: 9999px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: color-mix(in srgb, var(--color-text-value) 50%, transparent);
  }

  /* Focus visible styles */
  .focus-ring:focus-visible {
    outline: 2px solid var(--color-accent-value);
    outline-offset: 2px;
  }
}

/* Tabs Styling */
@layer components {
  /* Tabs trigger styling - Base state */
  [data-slot='tabs-trigger'] {
    background-color: transparent !important;
    color: hsl(var(--muted-foreground)) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Tabs trigger hover state */
  [data-slot='tabs-trigger']:hover:not([data-state='active']) {
    background-color: hsl(var(--muted)) !important;
    color: hsl(var(--foreground)) !important;
  }

  /* Tabs trigger active state - matches navigation pattern */
  [data-slot='tabs-trigger'][data-state='active'] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
    font-weight: 600 !important;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Dark mode active state */
  .dark [data-slot='tabs-trigger'][data-state='active'] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  /* Tabs trigger icons - ensure proper contrast */
  [data-slot='tabs-trigger'][data-state='active'] svg {
    stroke: hsl(var(--primary-foreground)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }

  /* Focus visible state */
  [data-slot='tabs-trigger']:focus-visible {
    outline: 2px solid hsl(var(--ring)) !important;
    outline-offset: 2px !important;
  }

  /* Disabled state */
  [data-slot='tabs-trigger']:disabled {
    pointer-events: none !important;
    opacity: 0.5 !important;
  }

  /* Navigation links styling - ensure proper contrast for active state */
  nav a.bg-muted.text-primary,
  nav a[class*='bg-muted'][class*='text-primary'] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  /* Navigation link icons - ensure proper contrast */
  nav a.bg-muted.text-primary svg,
  nav a[class*='bg-muted'][class*='text-primary'] svg {
    stroke: hsl(var(--primary-foreground)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }

  /* Ensure inactive nav links have proper colors */
  nav a.text-muted-foreground:not(.bg-muted) {
    color: hsl(var(--muted-foreground)) !important;
  }

  nav a.text-muted-foreground:hover:not(.bg-muted) {
    color: hsl(var(--foreground)) !important;
  }

  /* Dropdown menu content - ensure proper background */
  [data-slot='dropdown-menu-content'] {
    background-color: hsl(var(--popover)) !important;
    color: hsl(var(--popover-foreground)) !important;
  }
  
  /* Dropdown menu item focus state - use primary colors */
  [data-slot='dropdown-menu-item']:focus,
  [data-slot='dropdown-menu-item'][data-highlighted] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  /* Dropdown menu item icons - ensure proper contrast */
  [data-slot='dropdown-menu-item']:focus svg,
  [data-slot='dropdown-menu-item'][data-highlighted] svg {
    stroke: hsl(var(--primary-foreground)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  /* Ensure icons have proper contrast even when not focused */
  [data-slot='dropdown-menu-item'] svg:not([class*='text-']) {
    color: hsl(var(--foreground)) !important;
  }

  /* Select content - ensure proper background */
  [data-slot='select-content'] {
    background-color: hsl(var(--popover)) !important;
    color: hsl(var(--popover-foreground)) !important;
  }
  
  /* Select item focus state - use primary colors for better contrast */
  [data-slot='select-item'][data-highlighted] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  /* Select item icons - ensure proper contrast */
  [data-slot='select-item'][data-highlighted] svg {
    stroke: hsl(var(--primary-foreground)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  /* Select item checkmark - ensure visibility */
  [data-slot='select-item'] [data-slot='select-item-indicator'] svg {
    stroke: hsl(var(--primary-foreground)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  
  [data-slot='select-item'][data-highlighted] [data-slot='select-item-indicator'] svg {
    stroke: hsl(var(--primary-foreground)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }

  /* Dialog content - ensure proper background */
  [data-slot='dialog-content'] {
    background-color: hsl(var(--card)) !important;
    color: hsl(var(--card-foreground)) !important;
  }

  /* Label component - ensure proper text color */
  [data-slot='label'] {
    color: hsl(var(--foreground)) !important;
  }

  /* Card title - ensure proper text color */
  [data-slot='card-title'] {
    color: hsl(var(--card-foreground)) !important;
  }

  /* Switch component - improve contrast for off state */
  [data-slot='switch'][data-state='unchecked'] {
    background-color: hsl(var(--muted)) !important;
    border-color: hsl(var(--border)) !important;
  }

  .dark [data-slot='switch'][data-state='unchecked'] {
    background-color: hsl(var(--muted)) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Switch thumb - ensure proper contrast for unchecked state */
  [data-slot='switch-thumb'][data-state='unchecked'] {
    background-color: hsl(var(--foreground)) !important;
  }

  .dark [data-slot='switch-thumb'][data-state='unchecked'] {
    background-color: hsl(var(--foreground)) !important;
  }

  /* Switch thumb - ensure visibility for checked state (white) */
  [data-slot='switch-thumb'][data-state='checked'] {
    background-color: hsl(0, 0%, 100%) !important;
  }

  .dark [data-slot='switch-thumb'][data-state='checked'] {
    background-color: hsl(0, 0%, 100%) !important;
  }
}

/* Toast (Sonner) Styling */
@layer components {
  /* Base toast container */
  [data-sonner-toaster] {
    z-index: 9999 !important;
  }

  /* Base toast styles */
  [data-sonner-toast] {
    display: flex !important;
    align-items: flex-start !important;
    gap: 12px !important;
    background: hsl(var(--card)) !important;
    border: 2px solid hsl(var(--border)) !important;
    color: hsl(var(--card-foreground)) !important;
    box-shadow:
      0 10px 25px -5px rgba(0, 0, 0, 0.15),
      0 20px 40px -10px rgba(0, 0, 0, 0.1) !important;
    border-radius: 12px !important;
    padding: 16px 60px 16px 16px !important;
    min-width: 360px !important;
    max-width: 420px !important;
    min-height: 64px !important;
  }

  /* Toast icon */
  [data-sonner-toast] [data-icon] {
    flex-shrink: 0 !important;
    margin-top: 2px !important;
    width: 20px !important;
    height: 20px !important;
  }

  [data-sonner-toast] [data-icon] > * {
    width: 20px !important;
    height: 20px !important;
  }

  /* Toast content wrapper */
  [data-sonner-toast] [data-content] {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
    min-width: 0 !important;
  }

  /* Toast title and description */
  [data-sonner-toast] [data-title] {
    color: hsl(var(--card-foreground)) !important;
    font-weight: 600 !important;
    font-size: 0.9375rem !important;
    line-height: 1.4 !important;
    margin: 0 !important;
  }

  [data-sonner-toast] [data-description] {
    color: hsl(var(--muted-foreground)) !important;
    font-size: 0.875rem !important;
    line-height: 1.5 !important;
    margin: 0 !important;
  }

  /* Close button - ABSOLUTE RIGHT SIDE */
  [data-sonner-toast] [data-close-button],
  [data-sonner-toast] button[data-close-button] {
    all: revert !important;
    position: absolute !important;
    top: 12px !important;
    right: 12px !important;
    left: auto !important;
    bottom: auto !important;
    width: 32px !important;
    height: 32px !important;
    min-width: 32px !important;
    min-height: 32px !important;
    max-width: 32px !important;
    max-height: 32px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background-color: hsl(var(--foreground) / 0.1) !important;
    background-image: none !important;
    border: 2px solid hsl(var(--foreground) / 0.2) !important;
    border-radius: 6px !important;
    color: hsl(var(--foreground)) !important;
    cursor: pointer !important;
    transition: all 0.15s ease !important;
    flex-shrink: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    outline: none !important;
    text-decoration: none !important;
    font-family: inherit !important;
    font-size: 1rem !important;
    font-weight: 400 !important;
    line-height: 1 !important;
    opacity: 1 !important;
    transform: none !important;
    box-shadow: none !important;
    text-align: center !important;
    vertical-align: middle !important;
    appearance: none !important;
    -webkit-appearance: none !important;
    user-select: none !important;
  }

  [data-sonner-toast] [data-close-button]:hover,
  [data-sonner-toast] button[data-close-button]:hover {
    background-color: hsl(var(--foreground) / 0.2) !important;
    border-color: hsl(var(--foreground) / 0.4) !important;
    transform: scale(1.05) !important;
    opacity: 1 !important;
  }

  [data-sonner-toast] [data-close-button]:active,
  [data-sonner-toast] button[data-close-button]:active {
    transform: scale(0.95) !important;
  }

  [data-sonner-toast] [data-close-button] svg,
  [data-sonner-toast] button[data-close-button] svg {
    width: 16px !important;
    height: 16px !important;
    stroke-width: 2.5px !important;
    display: block !important;
    margin: 0 auto !important;
  }

  /* Success toast */
  [data-sonner-toast][data-type='success'] {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--success)) !important;
    border-left-width: 4px !important;
  }

  [data-sonner-toast][data-type='success'] [data-icon] {
    color: hsl(var(--success)) !important;
  }

  [data-sonner-toast][data-type='success'] [data-title] {
    color: hsl(var(--success)) !important;
  }

  [data-sonner-toast][data-type='success'] [data-close-button],
  [data-sonner-toast][data-type='success'] button[data-close-button] {
    background-color: hsl(var(--success) / 0.15) !important;
    border-color: hsl(var(--success) / 0.4) !important;
    color: hsl(var(--success)) !important;
  }

  [data-sonner-toast][data-type='success'] [data-close-button]:hover,
  [data-sonner-toast][data-type='success'] button[data-close-button]:hover {
    background-color: hsl(var(--success) / 0.25) !important;
    border-color: hsl(var(--success) / 0.6) !important;
  }

  /* Error toast */
  [data-sonner-toast][data-type='error'] {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--destructive)) !important;
    border-left-width: 4px !important;
  }

  [data-sonner-toast][data-type='error'] [data-icon] {
    color: hsl(var(--destructive)) !important;
  }

  [data-sonner-toast][data-type='error'] [data-title] {
    color: hsl(var(--destructive)) !important;
  }

  [data-sonner-toast][data-type='error'] [data-close-button],
  [data-sonner-toast][data-type='error'] button[data-close-button] {
    background-color: hsl(var(--destructive) / 0.15) !important;
    border-color: hsl(var(--destructive) / 0.4) !important;
    color: hsl(var(--destructive)) !important;
  }

  [data-sonner-toast][data-type='error'] [data-close-button]:hover,
  [data-sonner-toast][data-type='error'] button[data-close-button]:hover {
    background-color: hsl(var(--destructive) / 0.25) !important;
    border-color: hsl(var(--destructive) / 0.6) !important;
  }

  /* Warning toast */
  [data-sonner-toast][data-type='warning'] {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--warning)) !important;
    border-left-width: 4px !important;
  }

  [data-sonner-toast][data-type='warning'] [data-icon] {
    color: hsl(var(--warning)) !important;
  }

  [data-sonner-toast][data-type='warning'] [data-title] {
    color: hsl(var(--warning)) !important;
  }

  [data-sonner-toast][data-type='warning'] [data-close-button],
  [data-sonner-toast][data-type='warning'] button[data-close-button] {
    background-color: hsl(var(--warning) / 0.15) !important;
    border-color: hsl(var(--warning) / 0.4) !important;
    color: hsl(var(--warning)) !important;
  }

  [data-sonner-toast][data-type='warning'] [data-close-button]:hover,
  [data-sonner-toast][data-type='warning'] button[data-close-button]:hover {
    background-color: hsl(var(--warning) / 0.25) !important;
    border-color: hsl(var(--warning) / 0.6) !important;
  }

  /* Info toast */
  [data-sonner-toast][data-type='info'] {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--primary)) !important;
    border-left-width: 4px !important;
  }

  [data-sonner-toast][data-type='info'] [data-icon] {
    color: hsl(var(--primary)) !important;
  }

  [data-sonner-toast][data-type='info'] [data-title] {
    color: hsl(var(--primary)) !important;
  }

  [data-sonner-toast][data-type='info'] [data-close-button],
  [data-sonner-toast][data-type='info'] button[data-close-button] {
    background-color: hsl(var(--primary) / 0.15) !important;
    border-color: hsl(var(--primary) / 0.4) !important;
    color: hsl(var(--primary)) !important;
  }

  [data-sonner-toast][data-type='info'] [data-close-button]:hover,
  [data-sonner-toast][data-type='info'] button[data-close-button]:hover {
    background-color: hsl(var(--primary) / 0.25) !important;
    border-color: hsl(var(--primary) / 0.6) !important;
  }

  /* Loading toast */
  [data-sonner-toast][data-type='loading'] {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--border)) !important;
  }

  [data-sonner-toast][data-type='loading'] [data-icon] {
    color: hsl(var(--primary)) !important;
  }

  /* Default toast */
  [data-sonner-toast]:not([data-type]) [data-close-button],
  [data-sonner-toast]:not([data-type]) button[data-close-button] {
    background-color: hsl(var(--muted)) !important;
    border-color: hsl(var(--border)) !important;
    color: hsl(var(--foreground)) !important;
  }

  [data-sonner-toast]:not([data-type]) [data-close-button]:hover,
  [data-sonner-toast]:not([data-type]) button[data-close-button]:hover {
    background-color: hsl(var(--muted) / 0.8) !important;
    border-color: hsl(var(--foreground) / 0.3) !important;
  }

  /* Action button styling */
  [data-sonner-toast] [data-button],
  [data-sonner-toast] button[data-button] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
    border-radius: calc(var(--radius) - 2px) !important;
    padding: 6px 12px !important;
    font-size: 0.8125rem !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: opacity 0.15s ease !important;
    border: none !important;
  }

  [data-sonner-toast] [data-button]:hover,
  [data-sonner-toast] button[data-button]:hover {
    opacity: 0.9 !important;
  }

  /* Cancel button */
  [data-sonner-toast] [data-cancel-button],
  [data-sonner-toast] button[data-cancel-button] {
    background-color: hsl(var(--muted)) !important;
    color: hsl(var(--muted-foreground)) !important;
  }

  /* Dark mode adjustments */
  .dark [data-sonner-toast] {
    box-shadow:
      0 10px 25px -5px rgba(0, 0, 0, 0.4),
      0 20px 40px -10px rgba(0, 0, 0, 0.3) !important;
  }
}
